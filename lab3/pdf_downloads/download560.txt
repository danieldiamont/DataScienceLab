Robust Budget Allocation via Continuous Submodular Functions

Matthew Staib 1 Stefanie Jegelka 1

Abstract
The optimal allocation of resources for maximizing influence, spread of information or coverage,
has gained attention in the past years, in particular in machine learning and data mining. But in
applications, the parameters of the problem are
rarely known exactly, and using wrong parameters can lead to undesirable outcomes. We hence
revisit a continuous version of the Budget Allocation or Bipartite Influence Maximization problem introduced by Alon et al. (2012) from a robust optimization perspective, where an adversary may choose the least favorable parameters
within a confidence set. The resulting problem
is a nonconvex-concave saddle point problem
(or game). We show that this nonconvex problem can be solved exactly by leveraging connections to continuous submodular functions, and by
solving a constrained submodular minimization
problem. Although constrained submodular minimization is hard in general, here, we establish
conditions under which such a problem can be
solved to arbitrary precision .

1. Introduction
The optimal allocation of resources for maximizing influence, spread of information or coverage, has gained attention in the past few years, in particular in machine
learning and data mining (Domingos & Richardson, 2001;
Kempe et al., 2003; Chen et al., 2009; Gomez Rodriguez &
SchoÃàlkopf, 2012; Borgs et al., 2014).
In the Budget Allocation Problem, one is given a bipartite
influence graph between channels S and people T , and the
task is to assign a budget y(s) to each channel s in S with
the goal of maximizing the expected number of influenced
people I(y). Each edge (s, t) ‚àà E between channel s and
1

Massachusetts Institute of Technology. Correspondence
to: Matthew Staib <mstaib@mit.edu>, Stefanie Jegelka <stefje@mit.edu>.
Proceedings of the 34 th International Conference on Machine
Learning, Sydney, Australia, PMLR 70, 2017. Copyright 2017
by the author(s).

person t is weighted with a probability pst that, e.g., an
advertisement on radio station s will influence person t to
buy some product. The budget y(s) controls how many independent attempts are made via the channel s to influence
the people in T . The probability that a customer t is influenced when the advertising budget is y is
It (y) = 1 ‚àí

Y
(s,t)‚ààE

[1 ‚àí pst ]y(s) ,

(1)

and hence
P the expected number of influenced people is
I(y) = t‚ààT It (y). We write I(y; p) = I(y) to make the
dependence on the probabilities pst explicit. The total budget y must remain within someP
feasible set Y which may
encode e.g. a total budget limit s‚ààS y(s) ‚â§ C. We allow
the budgets y to be continuous, as in (Bian et al., 2017).
Since its introduction by Alon et al. (2012), several works
have extended the formulation of Budget Allocation and
provided algorithms (Bian et al., 2017; Hatano et al., 2015;
Maehara et al., 2015; Soma et al., 2014; Soma & Yoshida,
2015). Budget Allocation may also be viewed as influence maximization on a bipartite graph, where information
spreads as in the Independent Cascade model. For integer
y, Budget Allocation and Influence Maximization are NPhard. Yet, constant-factor approximations are possible, and
build on the fact that the influence function is submodular
in the binary case, and DR-submodular in the integer case
(Soma et al., 2014; Hatano et al., 2015). If y is continuous,
the problem is a concave maximization problem.
The formulation of Budget Allocation assumes that the
transmission probabilities are known exactly. But this is
rarely true in practice. Typically, the probabilities pst ,
and possibly the graph itself, must be inferred from observations (Gomez Rodriguez et al., 2010; Du et al., 2013;
Narasimhan et al., 2015; Du et al., 2014; Netrapalli &
Sanghavi, 2012). In Section 4 we will see that a misspecification or point estimate of parameters pst can lead to much
reduced outcomes. A more realistic assumption is to know
confidence intervals for the pst . Realizing this severe deficiency, recent work studied robust versions of Influence
Maximization, where a budget y must be chosen that maximizes the worst-case approximation ratio over a set of possible influence functions (He & Kempe, 2016; Chen et al.,
2016; Lowalekar et al., 2016). The resulting optimization
problem is hard but admits bicriteria approximations.

Robust Budget Allocation via Continuous Submodular Functions

In this work, we revisit Budget Allocation under uncertainty from the perspective of robust optimization (Bertsimas et al., 2011; Ben-Tal et al., 2009). We maximize the
worst-case influence ‚Äì not approximation ratio ‚Äì for p in a
confidence set centered around the ‚Äúbest guess‚Äù (e.g., posterior mean). This avoids pitfalls of the approximation ratio
formulation (which can be misled to return poor worst-case
budgets, as demonstrated in Appendix A), while also allowing us to formulate the problem as a max-min game:
max min I(y; p),
y‚ààY p‚ààP

(2)

where an ‚Äúadversary‚Äù can arbitrarily manipulate p within
the confidence set P. With p fixed, I(y; p) is concave in y.
However, the influence function I(y; p) is not convex, and
not even quasiconvex, in the adversary‚Äôs variables pst .
The new, key insight we exploit in this work is that I(y; p)
has the property of continuous submodularity in p ‚Äì in contrast to previously exploited submodular maximization in y
‚Äì and can hence be minimized by generalizing techniques
from discrete submodular optimization (Bach, 2015). The
techniques in (Bach, 2015), however, are restricted to box
constraints, and do not directly apply to our confidence
sets. In fact, general constrained submodular minimization
is hard (Svitkina & Fleischer, 2011; Goel et al., 2009; Iwata
& Nagano, 2009). We make the following contributions:
1. We present an algorithm with optimality bounds for
Robust Budget Allocation in the nonconvex adversarial scenario (2).
2. We provide the first results for continuous submodular minimization with box constraints and one more
‚Äúnice‚Äù constraint, and conditions under which the algorithm is guaranteed to return a global optimum.
1.1. Background and Related Work
We begin with some background material and, along the
way, discuss related work.
1.1.1. S UBMODULARITY OVER THE INTEGER LATTICE
AND CONTINUOUS DOMAINS

Submodularity is perhaps best known as a property of set
functions. A function F : 2V ‚Üí R defined on subsets
S ‚äÜ V of a ground set V is submodular if for all sets
S, T ‚äÜ V , it holds that F (S) + F (T ) ‚â• F (S ‚à© T ) +
F (S ‚à™T ). A similar definition extends to functions defined
over a distributive lattice L, e.g. the integer lattice. Such a
function f is submodular if for all x, y ‚àà L, it holds that
f (x) + f (y) ‚â• f (x ‚à® y) + f (x ‚àß y).

(3)

For the integer lattice and vectors x, y, x ‚à® y denotes the
coordinate-wise maximum and x ‚àß y the coordinate-wise

minimum. Submodularity has also been considered on
continuous domains X ‚äÇ Rd , where, if f is also twicedifferentiable, the property of submodularity means that all
off-diagonal entries of the the Hessian are nonpositive, i.e.,
‚àÇf (x)
‚àÇxi ‚àÇxj ‚â§ 0 for all i 6= j (Topkis, 1978, Theorem 3.2).
These functions may be convex, concave, or neither.
Submodular functions on lattices can be minimized by a
reduction to set functions, more precisely, ring families
(Birkhoff, 1937). Combinatorial algorithms for submodular optimization on lattices are discussed in (Khachaturov
et al., 2012). More recently, Bach (2015) extended results
based on the convex LovaÃÅsz extension, by building on connections to optimal transport. The subclass of L\ -convex
functions admits strongly polynomial time minimization
(Murota, 2003; Kolmogorov & Shioura, 2009; Murota &
Shioura, 2014), but does not apply in our setting.
Similarly, results for submodular maximization extend to
integer lattices, e.g. (Gottschalk & Peis, 2015). Stronger
results are possible if the submodular function also satisfies diminishing returns: for all x ‚â§ y (coordinate-wise)
and i such that y + ei ‚àà X , it holds that f (x + ei ) ‚àí f (x) ‚â•
f (y+ei )‚àíf (y). For such DR-submodular functions, many
approximation results for the set function case extend (Bian
et al., 2017; Soma & Yoshida, 2015; Soma et al., 2014). In
particular, Ene & Nguyen (2016) show a generic reduction
to set function optimization that they apply to maximization. In fact, it also applies to minimization:
Proposition
1.1. A DR-submodular function f defined
Qn
on i=1 [ki ] can be minimized in strongly polynomial
time O(n4 log4 k ¬∑ log2 (n log k) ¬∑ EO + n4 log4 k ¬∑
logO(1) (n log k)), where k = maxi ki and EO is the time
complexity of evaluating f . Here, [ki ] = {0, 1, . . . , ki ‚àí1}.
In particular, the time complexity is logarithmic in k. For
general lattice submodular functions, this is not possible
without further assumptions.
1.1.2. R ELATED P ROBLEMS
A sister problem of Budget Allocation is Influence Maximization on general graphs, where a set of seed nodes
is selected to start a propagation process. The influence
function is still monotone submodular and amenable to
the greedy algorithm (Kempe et al., 2003), but it cannot
be evaluated explicitly and requires approximation (Chen
et al., 2010). Stochastic Coverage (Goemans & VondraÃÅk,
2006) is a version of Set Cover where the covering sets
Si ‚äÇ V are random. A variant of Budget Allocation can be
written as stochastic coverage with multiplicity. Stochastic
Coverage has mainly been studied in the online or adaptive setting, where logarithmic approximation factors can
be achieved (Golovin & Krause, 2011; Deshpande et al.,
2016; Adamczyk et al., 2016).

Robust Budget Allocation via Continuous Submodular Functions

Our objective function (2) is a signomial inQ
p, i.e., a linear combination of monomials of the form i xci i . General signomial optimization is NP-hard (Chiang, 2005), but
certain subclasses are tractable: posynomials with all nonnegative coefficients can be minimized via Geometric Programming (Boyd et al., 2007), and signomials with a single negative coefficient admit sum of squares-like relaxations (Chandrasekaran & Shah, 2016). Our problem, a
constrained posynomial maximization, is not in general
a geometric program. Some work addresses this setting
via monomial approximation (Pascual & Ben-Israel, 1970;
Ecker, 1980), but, to our knowledge, our algorithm is the
first that solves this problem to arbitrary accuracy.

directly, and write I(y; x) instead of I(y; p).
2.1. Stochastic Optimization
If a (posterior) distribution of the parameters is known, a
simple strategy is to use expectations. We place a uniform prior on xst , and observe nst independent observations drawn from Ber(xst ). If we observe Œ±st failures and
and Œ≤st successes, the resulting posterior distribution on
the variable Xst is Beta(1 + Œ±st , 1 + Œ≤st ). Given such a
posterior, we may optimize

max E[I(y; X)].

(6)

y‚ààY

Two prominent strategies of addressing uncertainty in parameters of optimization problems are stochastic and robust optimization. If the distribution of the parameters
is known (stochastic optimization), formulations such as
value-at-risk (VaR) and conditional value-at-risk (CVaR)
(Rockafellar & Uryasev, 2000; 2002) apply. In contrast,
robust optimization (Ben-Tal et al., 2009; Bertsimas et al.,
2011) assumes that the parameters (of the cost function and
constraints) can vary arbitrarily within a known confidence
set U , and the aim is to optimize the worst-case setting, i.e.,
y

(5)

y‚ààY

1.1.3. ROBUST O PTIMIZATION

min sup {g(y; u) s.t. Ay ‚â§ b}.

max I(y; E[X]), or

(4)

u,A,b‚ààU

Here, we will only have uncertainty in the cost function.

Proposition 2.1. Problems (5) and (6) are concave maximization problems over the (convex) set Y and can be
solved exactly.
Concavity of (6) follows since it is an expectation over concave functions, and the problem can be solved by stochastic
gradient ascent or by explicitly computing gradients.
Merely maximizing expectation does not explicitly account
for volatility and hence risk. One option is to include variance (Ben-Tal & Nemirovski, 2000; Bertsimas et al., 2011;
AtamtuÃàrk & Narayanan, 2008):
p
(7)
min ‚àíE[I(y; X)] + Œµ Var(I(y; X)),
y‚ààY

In this paper we are principally concerned with robust maximization of the continuous influence function I(y), but
mention some results for the discrete case. While there
exist results for robust and CVaR optimization of modular (linear) functions (Nikolova, 2010; Bertsimas & Sim,
2003), submodular objectives do not in general admit such
optimization (Maehara, 2015), but variants admit approximations (Zhang et al., 2014). The brittleness of submodular optimization under noise has been studied in (Balkanski
et al., 2016; 2017; Hassidim & Singer, 2016).

but in our case this CVaR formulation seems difficult:

Approximations for robust submodular and influence optimization have been studied in (Krause et al., 2008; He &
Kempe, 2016; Chen et al., 2016; Lowalekar et al., 2016),
where an adversary can pick among a finite set of objective
functions or remove selected elements (Orlin et al., 2016).

The focus of this work is the robust version of Budget Allocation, where we allow an adversary to arbitrarily set the
parameters x within an uncertainty set X . This uncertainty
set may result, for instance, from a known distribution, or
simply assumed bounds. Formally, we solve

2. Robust and Stochastic Budget Allocation
The unknown parameters in Budget Allocation are the
transmission probabilities pst or edge weights in a graph.
If these are estimated from data, we may have posterior
distributions or, a weaker assumption, confidence sets for
the parameters. For ease of notation, we will work with
the failure probabilities xst = 1 ‚àí pst instead of the pst

Fact
p 2.1. For y in the nonnegative orthant, the term
Var(I(y; X)) need not be convex or concave, and need
not be submodular or supermodular.
This observation does not rule out a solution, but the apparent difficulties further motivate a robust formulation that, as
we will see, is amenable to optimization.
2.2. Robust Optimization

max min I(y; x),
y‚ààY x‚ààX

(8)

where Y ‚äÇ RS+ is a convex set with an efficient projection oracle, and X is an uncertainty set containing an estimate xÃÇ. In the sequel, we use uncertainty sets X =
{x ‚àà Box(l, u) : R(x) ‚â§ B}, where R is a distance (or divergence)
from the estimate xÃÇ, and Box(l, u) is the box
Q
[l
(s,t)‚ààE st , ust ]. The intervals [lst , ust ] can be thought of

Robust Budget Allocation via Continuous Submodular Functions

as either confidence intervals around xÃÇ, or, if [lst , ust ] =
[0, 1], enforce that each xst is a valid probability.
Common examples of uncertainty sets used in Robust Optimization are Ellipsoidal and D-norm uncertainty sets
(Bertsimas et al., 2011). Our algorithm in Section 3.1 applies to both.
Ellipsoidal uncertainty. The ellipsoidal or quadratic uncertainty set is defined by
X Q (Œ≥) = {x ‚àà Box(0, 1) : (x ‚àí xÃÇ)T Œ£‚àí1 (x ‚àí xÃÇ) ‚â§ Œ≥},
where Œ£ is the covariance of the random vector X of probabilities distributed according to our Beta posteriors. In our
case, since the distributions on each xst are independent,
Œ£‚àí1 is actually diagonal. Writing Œ£ = diag(œÉ 2 ), we have
o
n
X
Rst (xst ) ‚â§ Œ≥ ,
X Q (Œ≥) = x ‚àà Box(0, 1) :
(s,t)‚ààE

Input: suboptimality tolerance Œµ > 0, initial feasible
budget y (0) ‚àà Y
Output: Œµ-optimal budget y for Problem (8)
repeat
x(k) ‚Üê arg minx‚ààX I(y (k) ; x)
g (k) ‚Üê ‚àáy I(y (k) ; x(k) )
L(k) ‚Üê I(y (k) ; x(k) )
U (k) ‚Üê maxy‚ààY I(y; x(k) )
Œ≥ (k) ‚Üê (U (k) ‚àí L(k) )/kg (k) k22
y (k+1) ‚Üê projY (y (k) + Œ≥ (k) g (k) )
k ‚Üêk+1
until U (k) ‚àí L(k) ‚â§ Œµ
gy = ‚àáy I(y; x‚àó ). Hence, we must be able to compute x‚àó
for any y. We also obtain a duality gap: for any x0 , y 0 we
have
min I(y 0 ; x) ‚â§ max min I(y; x) ‚â§ max I(y; x0 ).

‚àí2
where Rst (x) = (xst ‚àí xÃÇst )2 œÉst
.

x‚ààX

D-norm uncertainty. The D-norm uncertainty set is similar to an `1 -ball around xÃÇ, and is defined as
n
X D (Œ≥) = x : ‚àÉc ‚àà Box(0, 1) s.t.
xst = xÃÇst + (ust ‚àí xÃÇst )cst ,

Algorithm 1 Subgradient Ascent

X

cst

o
‚â§Œ≥ .

(s,t)‚ààE

Essentially, we allow an adversary to increase xÃÇst up to
some upper bound ust , subject to some total budget Œ≥
across all terms xst . The set X D (Œ≥) can be rewritten as
n
o
X
X D (Œ≥) = x ‚àà Box(xÃÇ, u) :
Rst (xst ) ‚â§ Œ≥ ,
(s,t)‚ààE

where Rst (xst ) = (xst ‚àí xÃÇst )/(ust ‚àí xÃÇst ) is the fraction
of the interval [xÃÇst , ust ] we have used up in increasing xst .
The min-max formulation maxy‚ààY minx‚ààX I(y; x) has
several merits: the model is not tied to a specific learning
algorithm for the probabilities x as long as we can choose a
suitable confidence set. Moreover, this formulation allows
to fully hedge against a worst-case scenario.

3. Optimization Algorithm
As noted above, the function I(y; x) is concave as a function of y for fixed x. As a pointwise minimum of concave
functions, F (y) := minx‚ààX I(y; x) is concave. Hence, if
we can compute subgradients of F (y), we can solve our
max-min-problem via the subgradient method, as outlined
in Algorithm 1.
A subgradient gy ‚àà ‚àÇF (y) at y is given by the gradient of
I(y; x‚àó ) for the minimizing x‚àó ‚àà arg minx‚ààX I(y; x), i.e.,

y‚ààY x‚ààX

y‚ààY

(9)

This means we can estimate the optimal value I ‚àó and
use it in Polyak‚Äôs stepsize rule for the subgradient method
(Polyak, 1987).
But I(y; x) is not convex in x, and not even quasiconvex. For example, standard methods (Wainwright & Chiang, 2004, Chapter 12) imply that f (x1 , x2 , x3 ) = 1 ‚àí
‚àö
x1 x2 ‚àí x3 is not quasiconvex on R3+ . Moreover, the
above-mentioned signomial optimization techniques do not
apply for an exact solution either. So, it is not immediately
clear that we can solve the inner optimization problem.
The key insight we will be using is that I(y; x) has a different beneficial property: while not convex, I(y; x) as a
function of x is continuous submodular.
Lemma 3.1. Suppose we have n ‚â• 1 differentiable functions fi : R ‚Üí R+ , for i = 1, . . . , n, eitherQall nonincreasn
ing or all nondecreasing. Then, f (x) = i=1 fi (xi ) is a
continuous supermodular function from Rn to R+ .
Proof. For n = 1, the resulting function is modular and
therefore supermodular. In the case n ‚â• 2, we simply need
to compute derivatives. The mixed derivatives are
Y
‚àÇf
= fi0 (xi )fj0 (xj ) ¬∑
fk (xk ).
‚àÇxi ‚àÇxj

(10)

k6=i,j

By monotonicity, fi0 and fj0 have the same sign, so their
product is nonnegative, and since each fk is nonnegative,
the entire expression is nonnegative. Hence, f (x) is continuous supermodular by Theorem 3.2 of (Topkis, 1978).
Corollary 3.1. The influence function I(y; x) defined in
Section 2 is continuous submodular in x over the nonnegative orthant, for each y ‚â• 0.

Robust Budget Allocation via Continuous Submodular Functions

Proof. Since submodularity is preserved under summation,
it suffices to show that each function It (y) is continuous
submodular. By Lemma 3.1, since fs (z) = z y(s) is nonnegative and monotone nondecreasing for y(s) ‚â• 0, the
Q
y(s)
product (s,t)‚ààE xst is continuous supermodular in x.
Flipping the sign and adding a constant term yields It (y),
which is hence continuous submodular.
Conjecture 3.1. Strong duality holds, i.e.
max min I(y; x) = min max I(y; x).
y‚ààY x‚ààX

x‚ààX y‚ààY

(11)

If strong duality holds, then the duality gap
maxy‚ààY I(y; x‚àó ) ‚àí minx‚ààX I(y ‚àó ; x) in Equation (9)
is zero at optimality. If I(y; x) were quasiconvex in x,
strong duality would hold by Sion‚Äôs min-max theorem, but
this is not the case. In practice, we observe that the duality
gap always converges to zero.
Bach (2015) demonstrates how to minimize a continuous submodular function H(x) subject to box constraints
x ‚àà Box(l, u), up to an arbitrary suboptimality gap Œµ > 0.
The constraint set X in our Robust Budget Allocation problem, however, has box constraints with an additional constraint R(x) ‚â§ B. This case is not addressed in any previous work. Fortunately, for a large class of functions R,
there is still an efficient algorithm for continuous submodular minimization, which we present in the next section.
3.1. Constrained Continuous Submodular Function
Minimization
We next address an algorithm for minimizing a monotone
continuous submodular function H(x) subject to box constraints x ‚àà Box(l, u) and a constraint R(x) ‚â§ B:
minimize H(x)
s.t.
R(x) ‚â§ B
x ‚àà Box(l, u).

(12)

If H and R were convex, the constrained problem would
be equivalent to solving, with the right Lagrange multipler
Œª‚àó ‚â• 0:
minimize H(x) + Œª‚àó R(x)
(13)
s.t.
x ‚àà Box(l, u).
Although H and R are not necessarily convex here, it turns
out that a similar approach indeed applies. The main idea
of our approach bears similarity with (Nagano et al., 2011)
for the set function case, but our setting with continuous
functions and various uncertainty sets is more general, and
requires more argumentation. We outline our theoretical
results here, and defer further implementation details and
proofs to the appendix.
Following (Bach, 2015), we discretize the problem; for a
sufficiently fine discretization, we will achieve arbitrary accuracy. Let A be an interpolation mapping that maps the

Qn
Qn
discrete set i=1 [ki ] into Box(l, u) = i=1 [li , ui ] via the
componentwise interpolation functions Ai : [ki ] ‚Üí [li , ui ].
We say Ai is Œ¥-fine if Ai (xi + 1) ‚àí Ai (xi ) ‚â§ Œ¥ for all
xi ‚àà {0, 1, . . . , ki ‚àí 2}, and we say the full interpolation
function A is Œ¥-fine if each Ai is Œ¥-fine.
Qn
This Q
mapping yields functions H Œ¥ : i=1 [ki ] ‚Üí R and
n
RŒ¥ : i=1 [ki ] ‚Üí R via H Œ¥ (x) = H(A(x)) and RŒ¥ (x) =
R(A(x)). H Œ¥ is lattice submodular (on the integer lattice).
This construction leads to a reduction of Problem (12) to a
submodular minimization problem over the integer lattice:
Œ¥
minimize H Œ¥ (x)
Qn+ ŒªR (x)
s.t.
x ‚àà i=1 [ki ].

(14)

Ideally, there should then exist a Œª such that the associated
minimizer x(Œª) yields a close to optimal solution for the
constrained problem. Theorem 3.1 below states that this is
indeed the case.
Moreover, a second benefit of submodularity is that we can
find the entire solution path for Problem (14) by solving a
single optimization problem.
Lemma 3.2. Suppose H is continuous submodular, and
suppose the regularizer
R is strictly increasing and sepaPn
rable: R(x) = i=1 Ri (xi ). Then we can recover a minimizer x(Œª) for the induced discrete Problem (14) for any
Œª ‚àà R by solving a single convex optimization problem.
The problem in question arises from a relaxation h‚Üì that
extends H Œ¥ in each coordinate i to a function on distributions over the domain [ki ]. These distributions are represented via their inverse cumulative distribution functions
œÅi , which take the coordinate xi as input, and output the
probability of exceeding xi . The function h‚Üì is an analogue
of the LovaÃÅsz extension of set functions to continuous submodular functions (Bach, 2015), it is convex and coincides
with H Œ¥ on lattice points.
Formally, this resulting single optimization problem is:
Pn Pk ‚àí1
minimize h‚Üì (œÅ) + i=1 jii=1 aixi (œÅi (xi ))
Qn
s.t.
œÅ ‚àà i=1 Rk‚Üìi ‚àí1

(15)

where Rk‚Üì refers to the set of ordered vectors z ‚àà Rk that
satisfy z1 ‚â• z2 ‚â• ¬∑ ¬∑ ¬∑ ‚â• zk , the notation œÅi (xi ) denotes the
xi -th coordinate of the vector œÅi , and the aixi are strictly
convex functions given by
aixi (t) =

1 2
t ¬∑ [RiŒ¥ (xi ) ‚àí RiŒ¥ (xi ‚àí 1)].
2

(16)

Problem (15) can be solved by Frank-Wolfe methods
(Frank & Wolfe, 1956; Dunn & Harshbarger, 1978;
Lacoste-Julien, 2016; Jaggi, 2013). This is because the
greedy algorithm for computing subgradients of the LovaÃÅsz

Robust Budget Allocation via Continuous Submodular Functions

extension can be generalized, and yields a linear optimization oracle for the dual of Problem (15). We detail the relationship between Problems (14) and (15), as well as how
to implement the Frank-Wolfe methods, in Appendix C.
Let œÅ‚àó be the optimal solution for Problem (15). For any
Œª, we obtain a rounded solution x(Œª) for Problem (14) by
thresholding: we set x(Œª)i = max{j | 1 ‚â§ j ‚â§ ki ‚àí
1, œÅ‚àói (j) ‚â• Œª}, or zero if œÅ‚àói (j) < Œª for all j. Each x(Œª0 ) is
the optimal solution for Problem (14) with Œª = Œª0 . We use
the largest parameterized solution x(Œª) that is still feasible,
i.e. the solution x(Œª‚àó ) where Œª‚àó solves
min H Œ¥ (x(Œª))
s.t. Œª ‚â• 0
RŒ¥ (x(Œª)) ‚â§ B.

3.2. Application to Robust Budget Allocation

Theorem 3.1. Let H be continuous submodular and monotone decreasing, with `‚àû -Lipschitz constant G, and let R
be strictly increasing and separable. Assume all entries
œÅ‚àói (j) of the optimal solution œÅ‚àó of Problem (15) are distinct. Let x0 = A(x(Œª‚àó )) be the thresholding corresponding to the optimal solution Œª‚àó of Problem (17), mapped
back into the original continuous domain X . Then x0 is
feasible for the continuous Problem (12), and is a 2GŒ¥approximate solution:
min

H(x).

x‚ààBox(l,u), R(x)‚â§B

Theorem 3.1 implies an algorithm for solving Problem (12)
to Œµ-optimality: (1) set Œ¥ = Œµ/G, (2) compute œÅ‚àó which
solves Problem (15), (3) find the optimal thresholding of
œÅ‚àó by determining the smallest Œª‚àó for which RŒ¥ (x(Œª‚àó )) ‚â§
B, and (4) map x(Œª‚àó ) back into continuous space via the
interpolation mapping A.
Optimality Bounds. Theorem 3.1 is proved by comparing x0 and x‚àó to the optimal solution on the discretized
mesh
x‚àód ‚àà Q argmin
H Œ¥ (x).
x‚àà

If H is DR-submodular and R is affine in each coordinate,
then Problem (14) can be represented more compactly via
the reduction of Ene & Nguyen (2016), and hence problem (12) can be solved more efficiently. In particular, the
influence function I(y; x) is DR-submodular in x when for
each s, y(s) = 0 or y(s) ‚â• 1.

(17)

This Œª‚àó can be found efficiently via binary search or a linear scan.

H(x0 ) ‚â§ 2GŒ¥ +

Improvements. The requirement in Theorem 3.1 that the
elements of œÅ‚àó be distinct may seem somewhat restrictive,
but as long as œÅ‚àó has distinct elements in the neighborhood
of our particular Œª‚àó , this bound still holds. We see in Section 4.1.1 that in practice, œÅ‚àó almost always has distinct
elements in the regime we care about, and the bounds of
Remark 3.1 are very good.

n
Œ¥
i=1 [ki ]:R (x)‚â§B

Beyond the theoretical guarantee of Theorem 3.1, for any
problem instance and candidate solution x0 , we can compute a bound on the gap between H(x0 ) and H Œ¥ (x‚àód ). The
following two bounds are proved in the appendix:

The above algorithm directly applies to Robust Allocation with the uncertainty sets in Section 2.2. The ellipsoidal
uncertainty set X Q corresponds to the constraint that
P
2 ‚àí2
(s,t)‚ààE Rst (xst ) ‚â§ Œ≥ with Rst (x) = (xst ‚àí xÃÇst ) œÉst ,
and x ‚àà Box(0, 1). By the monotonicity of I(x, y), there
is never incentive to reduce any xst below xÃÇst , so we can
replace Box(0, 1) with Box(xÃÇ, 1). On this interval, each
Rst is strictly increasing, and Theorem 3.1 applies.
For D-norm sets, we have Rst (xst ) = (xst ‚àí xÃÇst )/(ust ‚àí
xÃÇst ). Since each Rst is monotone, Theorem 3.1 applies.
Runtime and Alternatives. Since the core algorithm
is Frank-Wolfe, it is straightforward to show that Problem (15) can be solved to Œµ-suboptimality in time
O(Œµ‚àí1 n2 Œ¥ ‚àí3 Œ±‚àí1 |T |2 log nŒ¥ ‚àí1 ), where Œ± is the minimum derivative of the functions Ri . If œÅ‚àó has distinct elements separated by Œ∑, then choosing Œµ =
Œ∑ 2 Œ±Œ¥/8 results in an exact solution to (14) in time
O(Œ∑ ‚àí2 n2 Œ¥ ‚àí4 Œ±‚àí2 |T |2 log nŒ¥ ‚àí1 ).
Noting that H Œ¥ + ŒªRŒ¥ is submodular for all Œª, one could
instead perform binary search over Œª, each time converting
the objective into a submodular set function via Birkhoff‚Äôs
theorem and solving submodular minimization e.g. via one
of the recent fast methods (Chakrabarty et al., 2017; Lee
et al., 2015). However, we are not aware of a practical implementation of the algorithm in (Lee et al., 2015). The
algorithm in (Chakrabarty et al., 2017) yields a solution in
expectation. This approach also requires care in the precision of the search over Œª, whereas our approach searches
directly over the O(nŒ¥ ‚àí1 ) elements of œÅ‚àó .

1. We can generate a discrete point x(Œª+ ) satisfying
H(x0 ) ‚â§ [H(x0 ) ‚àí H Œ¥ (x(Œª+ ))] + H Œ¥ (x‚àód ).
2. The Lagrangian yields the bound
H(x0 ) ‚â§ Œª‚àó (B ‚àí R(x0 )) + H Œ¥ (x‚àód ).

4. Experiments
We evaluate our Robust Budget Allocation algorithm on
both synthetic test data and a real-world bidding dataset
from Yahoo! Webscope (yah) to demonstrate that our
method yields real improvements. For all experiments, we

Robust Budget Allocation via Continuous Submodular Functions
D-norm, C = 0.4

0.028

Ellipsoidal, C = 0.4

0.01

D-norm, C = 0.400

0.3

Ellipsoidal, C = 0.400

0.3

0.2

0.2

0.1

0.1

0.005

0.014

0

0
0

0.026

50
D-norm, C = 4

100

0
0.01

0.013

50
Ellipsoidal, C = 4

100

0.005

0

0
0

50

100

0

50

100

Figure 1. Visualization of the sorted values of œÅ‚àói (j) (blue dots)
with comparison to the particular Lagrange multiplier Œª‚àó (orange
line). In most regimes there are no duplicate values, so that Theorem 3.1 applies. The theorem only needs distinctness at Œª‚àó .

used Algorithm 1 as the outer loop. For the inner submodular minimization step, we implemented the pairwise
Frank-Wolfe algorithm of (Lacoste-Julien & Jaggi, 2015).
S
In
P all cases, the feasible set of budgets Y is {y ‚àà R+ :
s‚ààS y(s) ‚â§ C} where the specific budget C depends on
the experiment. Our code is available at git.io/vHXkO.
4.1. Synthetic
On the synthetic data, we probe two questions: (1) how often does the distinctness condition of Theorem 3.1 hold, so
that we are guaranteed an optimal solution; and (2) what is
the gain of using a robust versus non-robust solution in an
adversarial setting? For both settings, we set |S| = 6 and
|T | = 2 and discretize with Œ¥ = 0.001. We generated true
probabilties pst , created Beta posteriors, and built both Ellipsoidal uncertainty sets X Q (Œ≥) and D-norm sets X D (Œ≥).
4.1.1. O PTIMALITY
Theorem 3.1 and Remark 3.1 demand that the values œÅ‚àói (j)
be distinct at our chosen Lagrange multiplier Œª‚àó and, under
this condition, guarantee optimality. We illustrate this in
four examples: for Ellipsoidal or a D-norm uncertainty set,
and a total influence budget C ‚àà {0.4, 4}. Figure 3 shows
all elements of œÅ‚àó in sorted order, as well as a horizontal
line indicating our Lagrange multiplier Œª‚àó which serves as
a threshold. Despite some plateaus, the entries œÅ‚àói (j) are
distinct in most regimes, in particular around Œª‚àó , the regime
that is needed for our results. Moreover, in practice (on the
Yahoo data) we observe later in Figure 3 that both solutiondependent bounds from Remark 3.1 are very good, and all
solutions are optimal within a very small gap.

0

0
0

5
10
D-norm, C = 3.740

15

1.5

1.5

1

1

0.5

0.5

0

0

400
Ellipsoidal, C = 3.740

800

0

400

800

0
0

5

10

15

Figure 2. Comparison of worst-case expected influences for Dnorm uncertainty sets X D (Œ≥) (left) and ellipsoidal uncertainty
sets X Q (Œ≥) (right), for different total budget bounds C. For any
particular adversary budget Œ≥, we compare minx‚ààX (Œ≥) I(y; x)
for each candidate allocation y.

4.1.2. ROBUSTNESS AND Q UALITY
Next, we probe the effect of a robust versus non-robust solution for different uncertainty sets and budgets Œ≥ of the
adversary. We compare our robust solution with using
a point estimate for x, i.e., ynom ‚àà argmaxy‚ààY I(y; xÃÇ),
treating estimates as ground truth, and the stochastic solution yexpect ‚àà argmaxy‚ààY E[I(y; X)] as per Section 2.1.
These two optimization problems were solved via standard
first-order methods using TFOCS (Becker et al., 2011).
Figure 2 demonstrates that indeed, the alternative budgets
are sensitive to the adversary and the robustly-chosen budget yrobust performs better, even in cases where the other
budgets achieve zero influence. When the total budget C is
large, yexpect performs nearly as well as yrobust , but when
resources are scarce (C is small) and the actual choice
seems to matter more, yrobust performs far better.
4.2. Yahoo! data
To evaluate our method on real-world data, we formulate
a Budget Allocation instance on advertiser bidding data
from Yahoo! Webscope (yah). This dataset logs bids on
1000 different phrases by advertising accounts. We map
the phrases to channels S and the accounts to customers T ,
with an edge between s and t if a corresponding bid was
made. For each pair (s, t), we draw the associated transmission probability pst uniformly from [0, 0.4]. We bias
these towards zero because we expect people not to be easily influenced by advertising in the real world. We then
generate an estimate pÃÇst and build up a posterior by gener-

Robust Budget Allocation via Continuous Submodular Functions
10500

9500

8500

7500

Figure 3. Convergence properties of our algorithm on real data.
In the first plot, ‚Äòp‚Äô and ‚Äòd‚Äô refer to primal and dual values, with
dual gap shown on the second plot. The third plot demonstrates
that the problem-dependent suboptimality bounds of Remark 3.1
(x for x(Œª+ ) and L for Lagrangian) are very small (good) for all
inner iterations of this run.

ating nst samples from Ber(pst ), where nst is the number
of bids between s and t in the dataset.
This transformation yields a bipartite graph with |S| =
1000, |T | = 10475, and more than 50,000 edges that we
use for Budget Allocation. In our experiments, the typical
gap between the naive ynom and robust yrobust was 100500 expected influenced people. We plot convergence of
the outer loop in Figure 3, where we observe fast convergence of both primal influence value and the dual bound.
4.3. Comparison to first-order methods
Given the success of first-order methods on nonconvex
problems in practice, it is natural to compare these to our
method for finding the worst-case vector x. On one of our
Yahoo problem instances with D-norm uncertainty set, we
compared our submodular minimization scheme to FrankWolfe with fixed stepsize as in (Lacoste-Julien, 2016), implementing the linear oracle using MOSEK (MOSEK ApS,
2015). Interestingly, from various initializations, FrankWolfe finds an optimal solution, as verified by comparing
to the guaranteed solution of our algorithm. Note that, due
to non-convexity, there are no formal guarantees for FrankWolfe to be optimal here, motivating the question of global
convergence properties of Frank-Wolfe in the presence of
submodularity.
It is important to note that there are many cases where firstorder methods are inefficient or do not apply to our setup.
These methods require either a projection oracle (PO) onto
or linear optimization oracle (LO) over the feasible set X
defined by `, u and R(x). The D-norm set admits a LO via
linear programming, but we are not aware of any efficient
LO for Ellipsoidal uncertainty, nor PO for either set, that
does not require quadratic programming. Even more, our
algorithm applies for nonconvex functions R(x) which induce nonconvex feasible sets X . Such nonconvex sets may
not even admit a unique projection, while our algorithm
achieves provable solutions.

0

40

80

Figure 4. Convergence properties of Frank-Wolfe (FW), versus
the optimal value attained with our scheme (SFM).

5. Conclusion
We address the issue of uncertain parameters (or, model
misspecification) in Budget Allocation or Bipartite Influence Maximization (Alon et al., 2012) from a robust optimization perspective. The resulting Robust Budget Allocation is a nonconvex-concave saddle point problem. Although the inner optimization problem is nonconvex, we
show how continuous submodularity can be leveraged to
solve the problem to arbitrary accuracy Œµ, as can be verified with the proposed bounds on the duality gap. In particular, our approach extends continuous submodular minimization methods (Bach, 2015) to more general constraint
sets, introducing a mechanism to solve a new class of constrained nonconvex optimization problems. We confirm on
synthetic and real data that our method finds high-quality
solutions that are robust to parameters varying arbitrarily in
an uncertainty set, and scales up to graphs with over 50,000
edges.
There are many compelling directions for further study.
The uncertainty sets we use are standard in the robust optimization literature, but have not been applied to e.g. Robust
Influence Maximization; it would be interesting to generalize our ideas to general graphs. Finally, despite the inherent nonconvexity of our problem, first-order methods are
often able to find a globally optimal solution. Explaining
this phenomenon requires further study of the geometry of
constrained monotone submodular minimization.
Acknowledgements
We thank the anonymous reviewers for their helpful suggestions. We also thank MIT Supercloud and the Lincoln
Laboratory Supercomputing Center for providing computational resources. This research was conducted with Government support under and awarded by DoD, Air Force Office of Scientific Research, National Defense Science and
Engineering Graduate (NDSEG) Fellowship, 32 CFR 168a,
and also supported by NSF CAREER award 1553284.

Robust Budget Allocation via Continuous Submodular Functions

References
Yahoo!
Webscope dataset ydata-ysm-advertiser-bidsURL http://research.yahoo.com/
v1 0.
Academic_Relations.
Adamczyk, Marek, Sviridenko, Maxim, and Ward, Justin.
Submodular Stochastic Probing on Matroids. Mathematics of Operations Research, 41(3):1022‚Äì1038, 2016.
Alon, Noga, Gamzu, Iftah, and Tennenholtz, Moshe. Optimizing Budget Allocation Among Channels and Influencers. In WWW. 2012.
AtamtuÃàrk, Alper and Narayanan, Vishnu. Polymatroids and
mean-risk minimization in discrete optimization. Operations Research Letters, 36(5):618‚Äì622, 2008.
Bach, Francis. Submodular Functions: From Discrete to
Continous Domains. arXiv:1511.00394, 2015.
Balkanski, Eric, Rubinstein, Aviad, and Singer, Yaron. The
power of optimization from samples. In NIPS, 2016.
Balkanski, Eric, Rubinstein, Aviad, and Singer, Yaron. The
limitations of optimization from samples. In STOC,
2017.
Becker, Stephen R., CandeÃÄs, Emmanuel J., and Grant,
Michael C. Templates for convex cone problems with
applications to sparse signal recovery. Mathematical
programming computation, 3(3):165‚Äì218, 2011.
Ben-Tal, Aharon and Nemirovski, Arkadi. Robust solutions of Linear Programming problems contaminated
with uncertain data. Mathematical Programming, 88(3):
411‚Äì424, 2000.
Ben-Tal, Aharon, El Ghaoui, Laurent, and Nemirovski,
Arkadi. Robust Optimization. Princeton University
Press, 2009.
Bertsimas, Dimitris and Sim, Melvyn. Robust discrete optimization and network flows. Mathematical programming, 98(1):49‚Äì71, 2003.
Bertsimas, Dimitris, Brown, David B., and Caramanis,
Constantine. Theory and Applications of Robust Optimization. SIAM Review, 53(3):464‚Äì501, 2011.
Best, Michael J. and Chakravarti, Nilotpal. Active set algorithms for isotonic regression; A unifying framework.
Mathematical Programming, 47(1-3):425‚Äì439, 1990.
Bian, Andrew An, Mirzasoleiman, Baharan, Buhmann,
Joachim M., and Krause, Andreas. Guaranteed Nonconvex Optimization: Submodular Maximization over
Continuous Domains. In AISTATS, 2017.
Birkhoff, Garrett. Rings of sets. Duke Mathematical Journal, 3(3):443‚Äì454, 1937.
Borgs, Christian, Brautbar, Michael, Chayes, Jennifer, and
Lucier, Brendan. Maximizing Social Influence in Nearly
Optimal Time. In SODA, 2014.
Boyd, Stephen, Kim, Seung-Jean, Vandenberghe, Lieven,
and Hassibi, Arash. A tutorial on geometric programming. Optimization and engineering, 8(1):67‚Äì127,
2007.

Chakrabarty, Deeparnab, Lee, Yin Tat, Sidford, Aaron, and
Wong, Sam Chiu-wai. Subquadratic submodular function minimization. In STOC, 2017.
Chandrasekaran, Venkat and Shah, Parikshit. Relative Entropy Relaxations for Signomial Optimization. SIAM
Journal on Optimization, 26(2):1147‚Äì1173, 2016.
Chen, Wei, Wang, Yajun, and Yang, Siyu. Efficient influence maximization in social networks. In KDD, 2009.
Chen, Wei, Wang, Chi, and Wang, Yajun. Scalable Influence Maximization for Prevalent Viral Marketing in
Large-scale Social Networks. In KDD, 2010.
Chen, Wei, Lin, Tian, Tan, Zihan, Zhao, Mingfei, and
Zhou, Xuren. Robust influence maximization. In KDD.
2016.
Chiang, Mung. Geometric Programming for Communication Systems. Commun. Inf. Theory, 2(1/2):1‚Äì154, 2005.
Deshpande, Amol, Hellerstein, Lisa, and Kletenik, Devorah. Approximation Algorithms for Stochastic Submodular Set Cover with Applications to Boolean Function
Evaluation and Min-Knapsack. ACM Trans. Algorithms,
12(3):42:1‚Äì42:28, 2016.
Domingos, Pedro and Richardson, Matt. Mining the network value of customers. In KDD, 2001.
Du, Nan, Song, Le, Gomez Rodriguez, Manuel, and Zha,
Hongyuan. Scalable influence estimation in continuoustime diffusion networks. In NIPS. 2013.
Du, Nan, Liang, Yingyu, Balcan, Maria-Florina, and Song,
Le. Influence function learning in information diffusion
networks. In ICML, 2014.
Dunn, Joseph C. and Harshbarger, S. Conditional gradient algorithms with open loop step size rules. Journal
of Mathematical Analysis and Applications, 62(2):432‚Äì
444, 1978.
Ecker, Joseph. Geometric Programming: Methods, Computations and Applications. SIAM Review, 22(3):338‚Äì
362, 1980.
Ene, Alina and Nguyen, Huy L. A Reduction for Optimizing Lattice Submodular Functions with Diminishing
Returns. arXiv:1606.08362, 2016.
Frank, Marguerite and Wolfe, Philip. An algorithm
for quadratic programming. Naval Research Logistics
Quarterly, 3(1-2):95‚Äì110, 1956.
Goel, Gagan, Karande, Chinmay, Tripathi, Pushkar, and
Wang, Lei. Approximability of combinatorial problems
with multi-agent submodular cost functions. In FOCS,
2009.
Goemans, Michel and VondraÃÅk, Jan. Stochastic Covering
and Adaptivity. In LATIN 2006: Theoretical Informatics.
Springer Berlin Heidelberg, 2006.
Golovin, Daniel and Krause, Andreas. Adaptive Submodularity: Theory and Applications in Active Learning and
Stochastic Optimization. Journal of Artificial Intelligence, 42:427‚Äì486, 2011.

Robust Budget Allocation via Continuous Submodular Functions

Gomez Rodriguez, Manuel and SchoÃàlkopf, Bernhard. Influence maximization in continuous time diffusion networks. In ICML, 2012.
Gomez Rodriguez, Manuel, Leskovec, Jure, and Krause,
Andreas. Inferring networks of diffusion and influence.
In KDD, 2010.
Gottschalk, Corinna and Peis, Britta. Submodular function maximization on the bounded integer lattice. In Approximation and Online Algorithms: 13th International
Workshop (WAOA), 2015.
Hassidim, Avinatan and Singer, Yaron. Submodular optimization under noise. arXiv preprint arXiv:1601.03095,
2016.
Hatano, Daisuke, Fukunaga, Takuro, Maehara, Takanori,
and Kawarabayashi, Ken-ichi. Lagrangian Decomposition Algorithm for Allocating Marketing Channels. In
AAAI, 2015.
He, Xinran and Kempe, David. Robust influence maximization. In KDD. 2016.
Iwata, Satoru and Nagano, Kiyohito. Submodular function minimization under covering constraints. In FOCS,
2009.
Jaggi, Martin. Revisiting Frank-Wolfe: Projection-Free
Sparse Convex Optimization. In ICML, 2013.
Kempe, David, Kleinberg, Jon, and Tardos, EÃÅva. Maximizing the Spread of Influence Through a Social Network.
In KDD, 2003.
Khachaturov, Vladimir R., Khachaturov, Roman V., and
Khachaturov, Ruben V. Supermodular programming on
finite lattices. Computational Mathematics and Mathematical Physics, 52(6):855‚Äì878, 2012.
Kolmogorov, Vladimir and Shioura, Akiyoshi. New algorithms for convex cost tension problem with application
to computer vision. Discrete Optimization, 6:378‚Äì393,
2009.
Krause, Andreas, McMahan, H Brendan, Guestrin, Carlos,
and Gupta, Anupam. Robust submodular observation selection. Journal of Machine Learning Research, 9(Dec):
2761‚Äì2801, 2008.
Lacoste-Julien, Simon. Convergence Rate of Frank-Wolfe
for Non-Convex Objectives. arXiv:1607.00345, 2016.
Lacoste-Julien, Simon and Jaggi, Martin. On the global linear convergence of Frank-Wolfe optimization variants.
In NIPS, 2015.
Lee, Yin Tat, Sidford, Aaron, and Wong, Sam Chiu-wai.
A faster cutting plane method and its implications for
combinatorial and convex optimization. In FOCS, 2015.
Lowalekar, Meghna, Varakantham, Pradeep, and Kumar,
Akshat. Robust Influence Maximization: (Extended Abstract). In AAMAS, 2016.
Maehara, Takanori. Risk averse submodular utility maximization. Operations Research Letters, 43(5):526‚Äì529,
2015.

Maehara, Takanori, Yabe, Akihiro, and Kawarabayashi,
Ken-ichi. Budget Allocation Problem with Multiple Advertisers: A Game Theoretic View. In ICML, 2015.
MOSEK ApS.
MOSEK MATLAB Toolbox 8.0.0.57,
2015.
URL http://docs.mosek.com/8.0/
toolbox/index.html.
Murota, Kazuo. Discrete convex analysis. SIAM, 2003.
Murota, Kazuo and Shioura, Akiyoshi. Exact bounds for
steepest descent algorithms of l-convex function minimization. Operations Research Letters, 42:361‚Äì366,
2014.
Nagano, Kiyohito, Kawahara, Yoshinobu, and Aihara,
Kazuyuki. Size-constrained submodular minimization
through minimum norm base. In ICML, 2011.
Narasimhan, Harikrishna, Parkes, David C, and Singer,
Yaron. Learnability of influence in networks. In NIPS.
2015.
Netrapalli, Praneeth and Sanghavi, Sujay. Learning the
graph of epidemic cascades. In SIGMETRICS. 2012.
Nikolova, Evdokia. Approximation algorithms for reliable stochastic combinatorial optimization. In APPROX.
2010.
Orlin, James B., Schulz, Andreas, and Udwani, Rajan. Robust monotone submodular function maximization. In
IPCO, 2016.
Pascual, Luis D. and Ben-Israel, Adi. Constrained maximization of posynomials by geometric programming.
Journal of Optimization Theory and Applications, 5(2):
73‚Äì80, 1970.
Polyak, Boris T. Introduction to Optimization. Number 04;
QA402. 5, P6. 1987.
Rockafellar, R Tyrrell and Uryasev, Stanislav. Optimization of conditional value-at-risk. Journal of risk, 2:21‚Äì
42, 2000.
Rockafellar, R Tyrrell and Uryasev, Stanislav. Conditional
value-at-risk for general loss distributions. Journal of
banking & finance, 26(7):1443‚Äì1471, 2002.
Soma, Tasuku and Yoshida, Yuichi. A Generalization of
Submodular Cover via the Diminishing Return Property
on the Integer Lattice. In NIPS, 2015.
Soma, Tasuku, Kakimura, Naonori, Inaba, Kazuhiro, and
Kawarabayashi, Ken-ichi. Optimal Budget Allocation: Theoretical Guarantee and Efficient Algorithm. In
ICML, 2014.
Svitkina, Zoya and Fleischer, Lisa. Submodular approximation: Sampling-based algorithms and lower bounds.
SIAM Journal on Computing, 40(6):1715‚Äì1737, 2011.
Topkis, Donald M. Minimizing a submodular function on
a lattice. Operations research, 26(2):305‚Äì321, 1978.
Wainwright, Kevin and Chiang, Alpha. Fundamental
Methods of Mathematical Economics. McGraw-Hill Education, 2004.
Zhang, Peng, Chen, Wei, Sun, Xiaoming, Wang, Yajun,
and Zhang, Jialin. Minimizing seed set selection with

Robust Budget Allocation via Continuous Submodular Functions

probabilistic coverage guarantee in a social network. In
KDD, 2014.

Robust Budget Allocation via Continuous Submodular Functions

A. Worst-Case Approximation Ratio versus True Worst-Case
Consider the function f (x; Œ∏) defined on {0, 1} √ó {0, 1}, with values given by:
(
(
1 x=0
1
x=0
f (x; 1) =
f (x; 0) =
2 x = 1.
0.6 x = 1,

(18)

We wish to choose x to maximize f (x; Œ∏) robustly with respect to adversarial choices of Œ∏. If Œ∏ were fixed, we could
directly choose x‚àóŒ∏ to maximize f (x; Œ∏). In particular, x‚àó0 = 0 and x‚àó1 = 1. Of course, we want to deal with worst-case Œ∏.
One option is to maximize the worst-case approximation ratio:
max min
x

Œ∏

f (x; Œ∏)
.
f (x‚àóŒ∏ ; Œ∏)

(19)

One can verify that the best x according to this criterion is x = 1, with worst-case approximation ratio 0.6 and worst-case
function value 0.6. In this paper, we optimize the worst-case of the actual function value:
max min f (x; Œ∏).
x

Œ∏

(20)

This criterion will select x = 0, which has a worse worst-case approximation ratio of 0.5, but actually guarantees a function
value of 1, significantly better than the 0.6 achieved by the other formulation of robustness.

B. DR-submodularity
B.1. Proof of Proposition 1.1
Proof. The function f can be reduced to a submodular set function g : 2V ‚Üí R via (Ene & Nguyen, 2016), where
|V | = O(n log k). The function g can be evaluated via mapping from 2V to the domain of f , and then evaluating f , in
time O(n log k ¬∑ EO). We can directly substitute these complexities into the runtime bound from (Lee et al., 2015).
B.2. DR-submodularity and L\ -convexity
A function is L\ -convex if it satisfies a discrete version of midpoint convexity, i.e. for all x, y it holds that




x+y
x+y
f (x) + f (y) ‚â• f
+f
.
2
2

(21)

Remark B.1. An L\ -convex function need not be DR-submodular, and vice-versa. Hence algorithms for optimizing one
type may not apply for the other.
Proof. Consider f1 (x1 , x2 ) = ‚àíx21 ‚àí 2x1 x2 and f2 (x1 , x2 ) = x21 + x22 , both defined on {0, 1, 2} √ó {0, 1, 2}. The function
f1 is DR-submodular but violates discrete midpoint convexity for the pair of points (0, 0) and (2, 2), while f2 is L\ -convex
but does not have diminishing returns in either dimension.
Intuitively-speaking, L\ -convex functions look like discretizations of convex functions. The continuous objective function
I(x, y) we consider need not be convex, hence its discretization need not be L\ -convex, and we cannot use those tools.
However, in some regimes (namely if each y(s) ‚àà {0} ‚à™ [1, ‚àû)), it happens that I(x, y) is DR-submodular in x.

C. Constrained Continuous Submodular Function Minimization
Define Rn‚Üì to be the set of vectors œÅ in Rn which are monotone nonincreasing, i.e. œÅ(1) ‚â• œÅ(2) ‚â• ¬∑ ¬∑ ¬∑ ‚â• œÅ(n). As in the
main text, define [k]
Qn= {0, 1, . . . , k ‚àí 1}. One of the key results from (Bach, 2015) is that an arbitrary submodular function
H(x) defined on i=1 [ki ] can be extended to a particular convex function h‚Üì (œÅ) so that
minimize h‚Üì (œÅ)
minimize H(x)Q
Qn
‚áî
n
s.t.
x ‚àà i=1 [ki ]
s.t.
œÅ ‚àà i=1 Rk‚Üìi ‚àí1 .

(22)

Robust Budget Allocation via Continuous Submodular Functions

Moreover, Theorem 4 from (Bach, 2015) states that, if aiyi are strictly convex functions for all i = 1, . . . , n and each
yi ‚àà [ki ], then the two problems
Pn Px
minimize H(x) + i=1 yii=1 a0iyi (Œª)
Qn
(23)
s.t.
x ‚àà i=1 [ki ].
and

Pn Pk ‚àí1
minimize h‚Üì (œÅ) + i=1 xii =1 aixi [œÅi (xi )]
Qn
s.t.
œÅ ‚àà i=1 Rk‚Üìi ‚àí1

(24)

are equivalent. In particular, one recovers a solution to Problem (23) for any Œª just as alluded to in Lemma 3.2: find œÅ‚àó
which solves Problem (24) and, for each component i, choose xi to be the maximal value for which œÅ‚àói (xi ) ‚â• Œª.
C.1. Proof of Lemma 3.2
Pn
Proof. The discretized form of the regularizer RŒ¥ is also separable and can be written RŒ¥ (x) = i=1 RiŒ¥ (x). For each
i = 1, . . . , n and each yi ‚àà [ki ] with yi ‚â• 1, define aiyi (t) = 21 t2 ¬∑ [RiŒ¥ (yi ) ‚àí RiŒ¥ (yi ‚àí 1)], so that a0iyi (t) = t ¬∑ [RiŒ¥ (yi ) ‚àí
RiŒ¥ (yi ‚àí 1)]. Since we assumed R(x) is strictly increasing, the coefficient of t2 in each aiyi (t) is strictly positive, so that
each aiyi (t) is strictly convex. Then,
#
"
xi
X

Œ¥
Œ¥
Œ¥
Œ¥
Ri (yi ) ‚àí Ri (yi ‚àí 1)
(25)
ŒªRi (xi ) = Œª ¬∑ Ri (0) +
yi =1
xi
X

= ŒªRiŒ¥ (0) +

a0iyi (Œª),

(26)

yi =1

so that the discretized version of the minimization problem can be written as
Pn Px
minimize H Œ¥ (x) + ŒªRŒ¥ (0) + i=1 yii=1 a0iyi (Œª)
Qn
s.t.
x ‚àà i=1 [ki ].
Since the term RŒ¥ (0) does not depend on the variable x, this minimization is equivalent to
Pn Px
minimize H Œ¥ (x) + i=1 yii=1 a0iyi (Œª)
Qn
s.t.
x ‚àà i=1 [ki ].

(27)

(28)

This problem is in the precise form where we can apply the preceding equivalence result between Problems (23) and (24),
so we are done.
C.2. Proof of Theorem 3.1
Proof. The general idea of this proof is to first show that the integer-valued point x‚àód which solves
x‚àód ‚àà

H Œ¥ (x)

argmin
x‚àà

Qn

Œ¥
i=1 [ki ]:R (x)‚â§B

is also nearly a minimizer of the continuous version of the problem, due to the fineness of the discretization. Then, we
show that the solutions traced out by x(Œª) get very close to x‚àód . These two results are simply combined via the triangle
inequality.
C.2.1. C ONTINUOUS AND D ISCRETE P ROBLEMS
We begin by proving that
H Œ¥ (x‚àód ) ‚â§ GŒ¥ +

min
x‚ààX :R(x)‚â§B

H(x).

(29)

Consider x‚àó ‚àà arg minx‚ààX :R(x)‚â§B H(x). If x‚àó corresponds to an integral point in the discretized domain, then H(x‚àó ) =
‚àó
H Œ¥ (x‚àód ) and we are done. Else,
Qn x has at least ‚àóone non-integral coordinate. By rounding coordinatewise, we can construct
a set X = {x1 , . . . , xm } ‚äÜ i=1 [ki ] so that x ‚àà conv({A(x1 ), . . . , A(xm )}. By monotonicity, there must be some xi ‚àà

Robust Budget Allocation via Continuous Submodular Functions

X with RŒ¥ (xi ) ‚â§ B, i.e. A(xi ) is feasible for the original continuous problem. By construction, since the discretization
given by A is Œ¥-fine, we must have kx‚àó ‚àí A(xi )k‚àû ‚â§ Œ¥. Applying the Lipschitz property of H and the optimality of x‚àó ,
we have
GŒ¥ ‚â• H(A(xi )) ‚àí H(x‚àó ) = H Œ¥ (xi ) ‚àí H(x‚àó ) ‚â• H Œ¥ (x‚àód ) ‚àí H(x‚àó ),
from which (29) follows.
C.2.2. D ISCRETE AND PARAMETERIZED D ISCRETE P ROBLEMS
Define Œª‚àí and Œª+ by
Œª‚àí ‚àà

H Œ¥ (x(Œª)) and

argmin
Œª‚â•0:RŒ¥ (x(Œª))‚â§B

Œª+ ‚àà

H Œ¥ (x(Œª)).

argmax
Œª‚â•0:RŒ¥ (x(Œª))‚â•B

The next step in proving our suboptimality bound is to prove that
H Œ¥ (x(Œª+ )) ‚â§ H Œ¥ (x‚àód ) ‚â§ H Œ¥ (x(Œª‚àí )),

(30)

from which it will follow that
H Œ¥ (x(Œª‚àí )) ‚â§ GŒ¥ + H Œ¥ (x‚àód ).
We begin by stating the min-max inequality, i.e. weak duality:
x‚àà

Qn

min

i=1 [ki

]:RŒ¥ (x)‚â§B

H Œ¥ (x) =
x‚àà


	
max H Œ¥ (x) + Œª(RŒ¥ (x) ‚àí B)

min
Q
n

i=1 [ki ]

‚â• max

Œª‚â•0 x‚àà

Œª‚â•0

min
Q
n



H Œ¥ (x) + Œª(RŒ¥ (x) ‚àí B)

	

i=1 [ki ]


	
= max H Œ¥ (x(Œª)) + Œª(RŒ¥ (x(Œª)) ‚àí B)
Œª‚â•0
 Œ¥
	
‚â•
max
H (x(Œª)) + Œª(RŒ¥ (x(Œª)) ‚àí B)
Œª‚â•0:RŒ¥ (x(Œª))‚â•B

‚â•

max

Œª‚â•0:RŒ¥ (x(Œª))‚â•B

H Œ¥ (x(Œª))

(31)
(32)
(33)
(34)
(35)

= H Œ¥ (x(Œª+ )).

(36)

We can also bound the optimal value of H Œ¥ (x‚àód ) from the other side:
H Œ¥ (x‚àód ) =

x‚àà

Qn

min

Œ¥
i=1 [ki ]:R (x)‚â§B

H Œ¥ (x) ‚â§

min

Œª‚â•0:RŒ¥ (x(Œª))‚â§B

because the set of x(Œª) parameterized by Œª is a subset of the full set {x ‚àà

H Œ¥ (x) = H Œ¥ (x(Œª‚àí ))

Qn

i=1 [ki ]

(37)

: RŒ¥ (x) ‚â§ B}.

We have now bounded the optimal value of H Œ¥ (x‚àód ) on either side by optimization problems where we seek an optimal
Œª ‚â• 0 for the parameterization x(Œª):
H Œ¥ (x(Œª+ )) ‚â§ H Œ¥ (x‚àód ) ‚â§ H Œ¥ (x(Œª‚àí )).

(38)

Recall that x(Œª) comes from thresholding the values of œÅ‚àó by Œª, and that we assume that the elements of œÅ‚àó are unique.
Hence, as we increase Œª, the components of x decrease by 1 each time. Combining this with the strict monotonicity
 of R,
we see that kx(Œª+ ) ‚àí x(Œª‚àí )k‚àû ‚â§ 1. By the Lipschitz properties of H Œ¥ , it follows thatH Œ¥ (x(Œª+ )) ‚àí H Œ¥ (x(Œª‚àí )) ‚â§ GŒ¥.
Since H Œ¥ (x‚àód ) lies in the interval between H Œ¥ (x(Œª+ )) and H Œ¥ (x(Œª‚àí )), it follows that H Œ¥ (x‚àód ) ‚àí H Œ¥ (x(Œª‚àí )) ‚â§ GŒ¥.
C.3. Proof of Remark 3.1
Define Œª‚àó = Œª‚àí as in the previous section, so that x0 = A(x(Œª‚àó ). The x(Œª+ ) bound is a simple consequence from the
above result that
H Œ¥ (x(Œª+ )) ‚â§ H Œ¥ (x‚àód ) ‚â§ H Œ¥ (x(Œª‚àí )) = H(x0 ).

Robust Budget Allocation via Continuous Submodular Functions

As for the Lagrangian bound, since x(Œª‚àó ) is a minimizer for the regularized function H Œ¥ (x) + Œª‚àó (RŒ¥ (x) ‚àí B), it follows
that
H Œ¥ (x(Œª‚àó )) + Œª‚àó (RŒ¥ (x(Œª‚àó )) ‚àí B) ‚â§ H Œ¥ (x‚àód ) + Œª‚àó (RŒ¥ (x‚àód ) ‚àí B).
(39)
Rearranging, and observing that RŒ¥ (x‚àód ) ‚â§ B because x‚àód is feasible, it holds that
H(x0 ) = H Œ¥ (x(Œª‚àó )) ‚â§ H Œ¥ (x‚àód ) + Œª‚àó (RŒ¥ (x‚àód ) ‚àí RŒ¥ (x(Œª‚àó ))) ‚â§ H Œ¥ (x‚àód ) + Œª‚àó (B ‚àí R(x0 )).

(40)

One can also combine either of these bounds with the result from the proof of Theorem 3.1 that H Œ¥ (x‚àód ) ‚â§ GŒ¥ + H(x‚àó )
yielding e.g.
H(x0 ) ‚â§ GŒ¥ + Œª‚àó (B ‚àí R(x0 )) + H Œ¥ (x‚àód ).
C.4. Solving the Optimization Problem
Now that we have proven equivalence results between the constrained problem we want to solve and the convex problem (24), we need to actually solve the convex problem. At the beginning of Section 5.2 in (Bach, 2015), it is stated that
this surrogate problem can optimized via the Frank-Wolfe method and its variants, but only the the version of Problem (24)
without the extra functions aixi is elaborated upon. Here we detail how Frank-Wolfe algorithms can be used to solve the
more general parametric regularized problem. Our aim is to spell out very clearly the applicability of Frank-Wolfe to this
problem, for the ease of future practitioners.
Bach (2015) notes that by duality, Problem (24) is equivalent to:

œÅ‚àà

min
Q
n
i=1

k ‚àí1

R‚Üì i

h‚Üì (œÅ) ‚àí H(0) +

n kX
i ‚àí1
X

aixi [œÅi (xi )] =

min
Q

œÅ‚àà

i=1 xi =1

n
i=1

k ‚àí1

R‚Üìi

max hœÅ, wi +
w‚ààB(H)

n kX
i ‚àí1
X

(
= max

min

w‚ààB(H)

œÅ‚àà

Qn

i=1

k ‚àí1

aixi [œÅi (xi )]

i=1 xi =1

hœÅ, wi +

R‚Üì i

n kX
i ‚àí1
X

)
aixi [œÅi (xi )]

i=1 xi =1

:= max f (w).
w‚ààB(H)

Here, the base polytope B(H) happens to be the convex hull of all vectors w which could be output by the greedy algorithm
in (Bach, 2015).
It is the dual problem, where we maximize over w, which is amenable to Frank-Wolfe. For Frank-Wolfe methods, we need
two oracles: an oracle which, given w, returns ‚àáf (w); and an oracle which, given ‚àáf (w), produces a point s which solves
the linear optimization problem maxs‚ààB(H) hs, ‚àáf (w)i.
Per Bach (2015), an optimizer of the linear problem can be computed directly from the greedy algorithm. For the gradient
oracle, recall that we can find a subgradient of g(x) = miny h(x, y) at the point x0 by finding y(x0 ) which is optimal for
the inner problem, and then computing ‚àáx h(x, y(x0 )). Moreover, if such y(x0 ) is the unique optimizer, then the resulting
vector is indeed the gradient of g(x) at x0 . Hence, in our case, it suffices to first find œÅ(w) which solves the inner problem,
and then ‚àáf (w) is simply œÅ(w) because the inner function is linear in w. Since each function aixi is strictly convex, the
minimizer œÅ(w) is unique, confirming that we indeed get a gradient of f , and that f is differentiable.
Of course, we still need to compute the minimizer œÅ(w). For a given w, we want to solve

œÅ‚àà

min
Q
n
i=1

k ‚àí1

hœÅ, wi +

R‚Üìi

n kX
i ‚àí1
X

aixi [œÅi (xi )]

i=1 xi =1

There are no constraints coupling the vectors œÅi , and the objective is similarly separable, so we can independently solve n
problems of the form
min hœÅ, wi +

œÅ‚ààRk‚àí1
‚Üì

k‚àí1
X
j=1

aj (œÅj ).

Robust Budget Allocation via Continuous Submodular Functions

Recall that each function aiyi (t) takes the form 12 t2 riyi for some riyi > 0. Let D = diag(r), the (k ‚àí 1) √ó (k ‚àí 1) matrix
with diagonal entries rj . Our problem can then be written as
k‚àí1

min hœÅ, wi +

œÅ‚ààRk‚àí1
‚Üì

1X
1
rj œÅ2j = min hœÅ, wi + hDœÅ, œÅi
k‚àí1
2 j=1
2
œÅ‚ààR‚Üì
1
= min hD1/2 œÅ, D‚àí1/2 wi + hD1/2 œÅ, D1/2 œÅi.
k‚àí1
2
œÅ‚ààR‚Üì

Completing the square, the above problem is equivalent to
min kD1/2 œÅ + D‚àí1/2 wk22 = min

œÅ‚ààRk‚àí1
‚Üì

k‚àí1
X

œÅ‚ààRk‚àí1
‚Üì
j=1

= min

k‚àí1
X

œÅ‚ààRk‚àí1
‚Üì
j=1

1/2

‚àí1/2

(rj œÅj + rj

wj )2

rj (œÅj + rj‚àí1 wj )2 .

This last expression is precisely the problem which is called weighted isotonic regression: we are fitting œÅ to diag(r‚àí1 )w,
with weights r, subject to a monotonicity constraint. Weighted isotonic regression is solved efficiently via the Pool Adjacent Violators algorithm of (Best & Chakravarti, 1990).
C.5. Runtime
Frank-Wolfe returns an Œµ-suboptimal solution in O(Œµ‚àí1 D2 L) iterations, where D is the diameter of the feasible region, and
L is the Lipschitz constant for the gradient of the objective (Jaggi, 2013). Our optimization problem is maxw‚ààB(H) f (w)
as defined in the previous section. Each w ‚àà B(H) has O(nŒ¥ ‚àí1 ) coordinates of the form H Œ¥ (x + ei ) ‚àí H Œ¥ (x). Since H Œ¥
is an expected influence in the range [0, T ], we can bound the magnitude of each coordinate of w by T and hence D2 by
O(nŒ¥ ‚àí1 T 2 ). If Œ± is the minimum derivative of the functions Ri , then the smallest coefficient of the functions aixi (t) is
bounded below by Œ±Œ¥. Hence the objective is the conjugate of an Œ±Œ¥-strongly convex function, and therefore has Œ±‚àí1 Œ¥ ‚àí1 Lipschitz gradient. Combining these, we arrive at the O(Œµ‚àí1 nŒ¥ ‚àí2 Œ±‚àí1 T 2 ) iteration bound. The most expensive step in
each iteration is computing the subgradient, which requires sorting the O(nŒ¥ ‚àí1 ) elements of œÅ in time O(nŒ¥ ‚àí1 log nŒ¥ ‚àí1 ).
Hence the total runtime of Frank-Wolfe is O(Œµ‚àí1 n2 Œ¥ ‚àí3 Œ±‚àí1 T 2 log nŒ¥ ‚àí1 ).
As specified in the main text, relating an approximate solution of (15) to a solution of (14) is nontrivial. Assume œÅ‚àó has
distinct elements separated by Œ∑, and chose Œµ to be less than Œ∑ 2 Œ±Œ¥/8. If œÅ is Œµ-suboptimal, then by Œ±Œ¥-strong convexity
we must have kœÅ ‚àí œÅ‚àó k2 < Œ∑/2, and therefore kœÅ ‚àí œÅ‚àó k‚àû < Œ∑/2. Since the smallest consecutive gap between elements
of œÅ‚àó is Œ∑, this implies that œÅ and œÅ‚àó have the same ordering, and therefore admit the same solution x after thresholding.
Accounting for this choice in Œµ, we have an exact solution to (14) in total runtime of O(Œ∑ ‚àí2 n2 Œ¥ ‚àí4 Œ±‚àí2 T 2 log nŒ¥ ‚àí1 ).

D. Expectation and Variance of the Influence Function
We wish to study the influence I(X, y), its expectation and its variance as a function of y. By definition, the influence
function is given by
Ô£´
Ô£∂
X
Y
y(s)
Ô£≠1 ‚àí
I(X, y) =
Xst Ô£∏ .
(41)
t‚ààT

(s,t)‚ààE

Before we prove the stated results, we will simplify the functions involved.
Maximizing I(X, y) is equivalent to minimizing the function
X Y

y(s)

Xst

(42)

t‚ààT (s,t)‚ààE

and vice-versa. The particular properties we are interested in, namely convexity and submodularity, are preserved under
sums. Moreover, expectation is linear and variances add, so for our purposes we can focus on only one term of the above

Robust Budget Allocation via Continuous Submodular Functions

sum. After reindexing in terms of i = 1, . . . , n instead of (s, t) ‚àà E, we are left studying functions of the form
f (y) =

n
Y

Xiyi .

(43)

i=1

If f (y) is always convex (or supermodular), then I(X, y) is always concave (submodular) in y, and similarly for their
expectations and variances.
Expectation By independence,
E[f (y)] =

n
Y

E[Xiyi ].

(44)

i=1

Suppose that each Xi ‚àº Beta(Œ±i , Œ≤i ), so that
Œì(Œ±i + Œ≤i )Œì(Œ±i + yi )
Œì(Œ±i + Œ≤i + yi )
Œì(Œ±i + Œ≤i )Œì(Œ±i + yi )Œì(Œ≤i )
=
Œì(Œ±i + Œ≤i + yi )Œì(Œ≤i )
B(Œ±i + yi , Œ≤i )
=
.
B(Œ±i , Œ≤i )

E[Xiyi ] =

(45)
(46)
(47)

Then,
n
Y
B(Œ±i + yi , Œ≤i )

E[f (y)] =

B(Œ±i , Œ≤i )

i=1

‚àù

n
Y

B(Œ±i + yi , Œ≤i ),

(48)

i=1

where by ‚àù we mean that the product of the denominators is a positive constant, dependent on the problem data but
independent of y.
Variance

The variance of f (y) can be written as
"
Var

n
Y

#
Xiyi

"
=E

i=1

n
Y

#
Xi2yi

"
‚àíE

i=1

=

n
Y
i=1
n
Y

n
Y

#2
Xiyi

(49)

i=1

n
h
i Y
2
2yi
E [Xiyi ]
E Xi
‚àí

(50)

i=1
n

B(Œ±i + 2yi , Œ≤i ) Y
=
‚àí
B(Œ±i , Œ≤i )
i=1
i=1



B(Œ±i + yi , Œ≤i )
B(Œ±i , Œ≤i )

2
.

(51)

D.1. Gradient of Expected Influence
Recall the identity
‚àÇ
B(a, b) = B(a, b)(œà(a) ‚àí œà(a + b)),
‚àÇa

(52)

where œà is the digamma function. We can then compute each component of the gradient of E[f (y)]:
n
Y
Y
‚àÇ
1
‚àÇ
(E[f (y)]) =
¬∑
B(Œ±j + yj , Œ≤j ) ¬∑
(B(Œ±i + yi , Œ≤i ))
‚àÇyi
B(Œ±i , Œ≤i )
‚àÇyi
i=1

(53)

j6=i

=

n
Y

Y
1
¬∑
B(Œ±j + yj , Œ≤j ) ¬∑ B(Œ±i + yi , Œ≤i ) ¬∑ (œà(Œ±i + yi ) ‚àí œà(Œ±i + yi + Œ≤i ))
B(Œ±i , Œ≤i )
i=1

(54)

j6=i

= E[f (y)] ¬∑ (œà(Œ±i + yi ) ‚àí œà(Œ±i + yi + Œ≤i )).

(55)

Robust Budget Allocation via Continuous Submodular Functions

D.2. Counterexample for Fact 2.1
p
We give a specific choice of parameters n, Œ±i , Œ≤i and yi for which the resulting function Var(f (y)) is non-convex, nonconcave, non-submodular and non-supermodular for various points y ‚àà Rn+ . For the case T = 1, the function 1 ‚àí f (y) is
p
a valid influence function, so we have a valid counterexample for Var(I(X, y)).
Consider the case n = 2, with Œ±1 = Œ±2 = 1 and Œ≤1 = Œ≤2 = 1. This corresponds to the Budget Allocation problem
where we have two sources each with an edge to one customer, and we have onlyp
our prior (i.e. no data) on either of the
edge probabilities. Using equation (51), we can directly compute the Hessian of Var(f (y)) at any point
p y, e.g. using
Mathematica. In particular, for y1 = y2 = 1, the Hessian has a positive and a negative eigenvalue, so pVar(f (y)) is
neither convex nor concave at this point. Also for y1 = y2 = 1, the off-diagonal element is negative, so Var(f (y)) is
not supermodular over all of R2+ . However, for y1 = y2 = 3, the off-diagonal element is positive, so our function is also
not submodular.

